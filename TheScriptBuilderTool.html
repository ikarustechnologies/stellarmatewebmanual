

<!DOCTYPE html>
<link href="https://fonts.googleapis.com/css2?family=Inter" rel="stylesheet">
<html lang="en">

<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="generator" content="HelpNDoc Professional Edition 6.9.0.577">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="favicon.ico"/>

  <title>The Script Builder Tool</title>
  <meta name="description" content="" /> 
  <meta name="keywords" content="">



  

  <!-- Twitter Card data -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="The Script Builder Tool">
  <meta name="twitter:description" content="">

  <!-- Open Graph data -->
  <meta property="og:title" content="The Script Builder Tool" />
  <meta property="og:type" content="article" />
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="The StellarMate Plus Manual" /> 

  <!-- Bootstrap core CSS -->
  <link href="vendors/bootstrap-3.4.1/css/bootstrap.min.css" rel="stylesheet"/>

  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <link href="vendors/bootstrap-3.4.1/css/ie10-viewport-bug-workaround.css" rel="stylesheet"/>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="vendors/html5shiv-3.7.3/html5shiv.min.js"></script>
      <script src="vendors/respond-1.4.2/respond.min.js"></script>
    <![endif]-->

  <!-- JsTree styles -->
  <link href="vendors/jstree-3.3.7/themes/default/style.min.css" rel="stylesheet"/>

  <!-- Hnd styles -->
  <link href="css/layout.min.css" rel="stylesheet" />
  <link href="css/effects.min.css" rel="stylesheet" />
  <link href="css/theme-light-blue.min.css" rel="stylesheet" />
  <link href="css/print.min.css" rel="stylesheet" media="print" />
  <style type="text/css">nav { width: 350px} @media screen and (min-width:769px) { body.md-nav-expanded div#main { margin-left: 350px} body.md-nav-expanded header { padding-left: 364px} }</style>

  <!-- Content style -->
  <link href="css/hnd.content.css" rel="stylesheet" />

  



</head>

<body class="md-nav-expanded">



  <div id="skip-link">
    <a href="#main-content" class="element-invisible">Skip to main content</a>
  </div>

  <header class="headroom">
    <button class="hnd-toggle btn btn-default">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>        
    </button>
    <h1>The StellarMate Plus Manual</h1>
    <a href="https://www.stellarmate.com"><img src="StellarMate_Logo_Text_Black.png" alt="logo" class="logo"/></a>
  </header>

  <nav class="md-nav-expanded">
    <!-- Nav tabs -->
    <ul class="tab-tabs nav nav-tabs" role="tablist">
      <li id="nav-close"> 
        <button class="hnd-toggle btn btn-default">
          <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
        </button>
      </li>
      
	  
        <li role="presentation" class="tab active">
            <a href="#contents" id="tab-contents" aria-controls="contents" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-list"></i>
                Contents
            </a>
        </li>
      
        <li role="presentation" class="tab">
            <a href="#search" id="tab-search" aria-controls="search" role="tab" data-toggle="tab">
                <i class="glyphicon glyphicon-search"></i>
                Search
            </a>
        </li>
      
    </ul>  <!-- /Nav tabs -->

    <!-- Tab panes -->
    <div class="tab-content">
	  
      <div role="tabpanel" class="tab-pane active" id="contents">
        <div id="toc" class="tree-container unselectable"
            data-url="_toc.json"
            data-openlvl="1"
        >
            
        </div>
      </div>  <!-- /contents-->
      
      <div role="tabpanel" class="tab-pane" id="search">
        <div class="search-content">
          <div class="search-input">
            <form id="search-form">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" class="form-control" id="input-search" name="input-search" placeholder="Search..." />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit">
                      <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                    </button>
                  </span>
                </div>
              </div>
            </form>
          </div>  <!-- /search-input -->
          <div class="search-result">
            <div id="search-info"></div>
            <div class="tree-container unselectable" id="search-tree"></div>
          </div>  <!-- /search-result -->
        </div>  <!-- /search-content -->
      </div>  <!-- /search-->
      
    </div>  <!-- /Tab panes -->

  </nav>

  <div id="main">

    <article>
        <div id="topic-content" class="container-fluid" 
		  data-hnd-id="TheScriptBuilderTool"
		  data-hnd-context="117"
		  data-hnd-title="The Script Builder Tool"
		>
            
                <div class="navigation">
                    <ol class="breadcrumb">
                        <li><a href="TheKStarsHandbook.html">The KStars Handbook</a></li><li><a href="KStarsTools.html">KStars Tools</a></li>
                    </ol>
                    <div class="nav-arrows">
                        <div class="btn-group btn-group-xs" role="group"><a class="btn btn-default" href="KStarsTools.html" title="KStars Tools" role="button"><span class="glyphicon glyphicon-menu-up" aria-hidden="true"></span></a><a class="btn btn-default" href="WhatsUpTonightTool.html" title="What's Up Tonight? Tool" role="button"><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span></a><a class="btn btn-default" href="SolarSystemViewer.html" title="Solar System Viewer" role="button"><span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span></a></div>
                    </div>
                </div> 
            

            <a id="main-content"></a>

            <h2>The Script Builder Tool</h2>

            <div class="main-content">
                
<p></p>
<p class="rvps10"><span class="rvts20">KDE applications can be controlled externally from another program, from a console prompt, or from a shell script using the Inter-process communication protocol (D-Bus).&nbsp;KStars&nbsp;takes advantage of this feature to allow rather complex behaviors to be scripted and played back at any time. This can be used, for example, to create a classroom demo to illustrate an astronomical concept.</span></p>
<p class="rvps10"><span class="rvts20">The problem with&nbsp;D-Bus&nbsp;scripts is, writing them is a bit like programming, and can seem a daunting task to those who do not have programming experience. The Script Builder Tool provides a&nbsp;GUI&nbsp;point-and-click interface for constructing&nbsp;KStars&nbsp;D-Bus&nbsp;scripts, making it very easy to create complex scripts.</span></p>
<h4 class="rvps28"><a name="SB-INTRO"></a><span class="rvts0"><span class="rvts22">Introduction to the Script Builder</span></span></h4>
<p class="rvps10"><span class="rvts20">Before explaining how to use the Script Builder, I provide a very brief introduction to all of the&nbsp;GUI&nbsp;components; for more infomation, use the "What's This?" function.</span></p>
<p class="rvps3"><img alt="" style="padding : 1px;" src="lib/scriptbuilder.png"></p>
<p class="rvps10"><span class="rvts20">The Script Builder is shown in the above screenshot. The box on the left is the&nbsp;</span><span class="rvts21">Current Script box</span><span class="rvts20">; it shows the list of commands that comprise the current working script. The box on the right is the&nbsp;</span><span class="rvts21">Function Browser</span><span class="rvts20">; it displays the list of all available script functions. Below the Function Browser, there is a small panel which will display short documentation about the script function highlighted in the Function Browser. The panel below the Current Script box is the&nbsp;</span><span class="rvts21">Function Arguments panel</span><span class="rvts20">; when a function is highlighted in the Current Script box, this panel will contain items for specifying values for any arguments that the highlighted function requires.</span></p>
<p class="rvps10"><span class="rvts20">Along the top of the window, there is a row of buttons which operate on the script as a whole. From left to right, they are:&nbsp;New Script,&nbsp;Open Script,&nbsp;Save Script,&nbsp;Save Script As..., and&nbsp;Test Script. The function of these buttons should be obvious, except perhaps the last button. Pressing&nbsp;Test Script&nbsp;will attempt to run the current script in the main&nbsp;KStars&nbsp;window. You should move the Script Builder window out of the way before pressing this, so you can see the results.</span></p>
<p class="rvps10"><span class="rvts20">In the center of the window, there is a column of buttons which operate on individual script functions. From top to bottom, they are:&nbsp;Add Function,&nbsp;Remove Function,&nbsp;Copy Function,&nbsp;Move Up, and&nbsp;Move Down.&nbsp;Add Function&nbsp;adds the currently-highlighted function in the Function Browser to the Current Script box (you can also add a function by double-clicking on it). The rest of the buttons operate on the function highlighted in the Current Script box, either removing it, duplicating it, or changing its position in the current script.</span></p>
<h4 class="rvps28"><a name="SB-USING"></a><span class="rvts0"><span class="rvts22">Using the Script Builder</span></span></h4>
<p class="rvps10"><span class="rvts20">In order to illustrate using the Script Builder, we present a small tutorial example where we make a script that tracks the Moon while the clock runs at an accelerated rate.</span></p>
<p class="rvps10"><span class="rvts20">If we are going to track the Moon, we will need to point the display at it first. The&nbsp;</span><span class="rvts21">lookToward</span><span class="rvts20">&nbsp;function is used to do this. Highlight this function in the Function Browser, and note the documentation displayed in the panel below the Browser. Press the&nbsp;Add Function&nbsp;button to add this function to the Current Script box. The Function Arguments panel will now contain a combobox labeled&nbsp;“Dir”, short for direction. This is the direction in which the display should be pointed. The combobox contains only the cardinal compass points, not the Moon or any other objects. You can either enter&nbsp;“Moon”&nbsp;in the box manually, or press the&nbsp;Object&nbsp;button to use the&nbsp;Find Object&nbsp;window to select the Moon from the list of named objects. Note that, as usual, centering on an object automatically engages object-tracking mode, so there is no need to add the&nbsp;</span><span class="rvts21">setTracking</span><span class="rvts20">&nbsp;function after lookToward.</span></p>
<p class="rvps10"><span class="rvts20">Now that we have taken care of pointing at the Moon, we next want to make time pass at an accelerated rate. Use the&nbsp;</span><span class="rvts21">setClockScale</span><span class="rvts20">&nbsp;function for this. Add it to the script by double-clicking on it in the Function Browser. The Function Arguments panel contains a timestep spinbox for setting the desired time step for the simulation clock. Change the timestep to 3 hours.</span></p>
<p class="rvps10"><span class="rvts20">OK, we have pointed at the Moon and accelerated the clock. Now we just want the script to wait for several seconds while the display tracks on the Moon. Add the&nbsp;</span><span class="rvts21">waitFor</span><span class="rvts20">&nbsp;function to the script, and use the Function Arguments panel to specify that it should wait for 20 seconds before continuing.</span></p>
<p class="rvps10"><span class="rvts20">To finish up, let us reset the clock's timestep to the normal value of 1 second. Add another instance of setClockScale, and set its value to 1 sec.</span></p>
<p class="rvps10"><span class="rvts20">Actually, we are not quite done yet. We should probably make sure that the display is using Equatorial coordinates before the script tracks the Moon with an accelerated time step. Otherwise, if the display is using Horizontal coordinates, it will rotate very quickly through large angles as the Moon rises and sets. This can be very confusing, and is avoided by setting the View Option&nbsp;</span><span class="rvts21">UseAltAz</span><span class="rvts20">&nbsp;to&nbsp;“false”. To change any View Option, use the&nbsp;</span><span class="rvts21">changeViewOption</span><span class="rvts20">&nbsp;function. Add this function to the script, and examine the Function Arguments panel. There is a combobox which contains the list of all options which can be adjusted by changeViewOption. Since we know we want the UseAltAz option, we could simply select it from the combobox. However, the list is quite long, and there is no explanation of what each item is for. It therefore may be easier to press the&nbsp;Browse Tree&nbsp;button, which will open a window containing a tree view of the available options, organized by topic. In addition, each item has a short explanation of what the option does, and the data type of the option's value. We find UseAltAz under the&nbsp;Skymap Options&nbsp;category. Just highlight this item and press&nbsp;OK, and it will be selected in the combobox of the Function Arguments panel. Finally, make its value&nbsp;“false”&nbsp;or&nbsp;“0”.</span></p>
<p class="rvps10"><span class="rvts20">One more step: changing UseAltAz at the end of the script does us no good; we need this to be changed before anything else happens. So, make sure this function is highlighted in the Current Script box, and press the&nbsp;Move Up&nbsp;button until it is the first function.</span></p>
<p class="rvps10"><span class="rvts20">Now that we have finished the script, we should save it to disk. Press the&nbsp;Save Script&nbsp;button. This will first open a window in which you can provide a name for the script, and fill in your name as the author. Enter&nbsp;“Tracking the Moon”&nbsp;for a name, and your name as the author, and press&nbsp;OK. Next, you will see the standard&nbsp;KDE&nbsp;Save File dialog. Specify a filename for the script and press&nbsp;OK&nbsp;to save the script. Note that if your filename does not end with&nbsp;“.kstars”, this suffix will be automatically attached. If you are curious, you can examine the script file with any text editor.</span></p>
<p class="rvps10"><span class="rvts20">Now that we have a completed script, we can run it in a couple of ways. From a console prompt, you can simply execute the script as long as an instance of&nbsp;KStars&nbsp;is currently running. Alternatively, you can execute the script from within&nbsp;KStars&nbsp;using the&nbsp;Run Script...&nbsp;item in the&nbsp;File&nbsp;menu.</span></p>
<p></p>

            </div>
            
            <div id="topic_footer"><div id="topic_footer_content">Copyright &copy; 2020 by Ikarus Technologies. All Rights Reserved.</div></div>
        </div>  <!-- /#topic-content -->
    </article>

    <footer></footer>

  </div>  <!-- /#main -->

  <div class="mask" data-toggle="sm-nav-expanded"></div>
  
  <!-- Modal -->
  <div class="modal fade" id="hndModal" tabindex="-1" role="dialog" aria-labelledby="hndModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="hndModalLabel"></h4>
        </div>
        <div class="modal-body">
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary modal-btn-close" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="vendors/jquery-3.4.1/jquery.min.js"></script>
  <script src="vendors/bootstrap-3.4.1/js/bootstrap.min.js"></script>
  <script src="vendors/markjs-8.11.1/jquery.mark.min.js"></script>
  <script src="vendors/uri-1.19.1/uri.min.js"></script>
  <script src="vendors/imageMapResizer-1.0.7/imageMapResizer.min.js"></script>
  <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
  <script src="vendors/bootstrap-3.4.1/js/ie10-viewport-bug-workaround.js"></script>
  
  <!-- Headroom -->
  <script src="vendors/headroom-0.9.4/headroom.min.js"></script>
  <script src="vendors/headroom-0.9.4/jquery.headroom.min.js"></script>

  <!-- JsTree -->
  <script src="vendors/jstree-3.3.7/jstree.min.js"></script>

  <!-- HelpNDoc scripts -->
  <script src="_translations.js"></script>
  <script src="js/hndsd.min.js"></script>
  <script src="js/hndse.min.js"></script>
  <script src="js/app.min.js"></script>

  <!-- Scripts -->
  <script>
    $(function() {
      // Create the app
      var app = new Hnd.App();
      // Update translations
      hnd_ut(app);
	  // Instanciate imageMapResizer
	  imageMapResize();
	  // Custom JS
	  
      // Boot the app
      app.Boot();
    });
  </script>



</body>

</html>

